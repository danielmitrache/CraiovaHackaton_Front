<div class="garage-container">
  <div class="garage-header">
    <h1>Garage Appointments</h1>
    <p>Select a date and time for your appointment</p>
  </div>

  <div class="calendar-wrapper">
    <!-- Month/Year Navigation -->
    <div class="calendar-controls">
      <button class="nav-button" (click)="previousMonth()">
        <span>&lt;</span>
      </button>
      <div class="month-year-display">
        <span>{{ months[currentMonth] }} {{ currentYear }}</span>
      </div>
      <button class="nav-button" (click)="nextMonth()">
        <span>&gt;</span>
      </button>
    </div>

    <!-- Calendar Grid -->
    <div class="calendar">
      <!-- Week Days Header -->
      <div class="weekdays">
        <div class="weekday" *ngFor="let day of weekDays">{{ day }}</div>
      </div>

      <!-- Calendar Days -->
      <div class="calendar-days">
        <div
          *ngFor="let calendarDay of calendarDays"
          class="calendar-day"
          [class.other-month]="!calendarDay.isCurrentMonth"
          [class.occupied]="calendarDay.isOccupied"
          [class.selected]="calendarDay.isSelected"
          [class.past-date]="calendarDay.isPastDate"
          [class.disabled]="calendarDay.isOccupied || calendarDay.isPastDate"
          (click)="selectDay(calendarDay)">
          {{ calendarDay.day }}
        </div>
      </div>
    </div>

    <!-- Legend -->
    <div class="legend">
      <div class="legend-item">
        <span class="legend-color occupied-color"></span>
        <span>Fully Booked</span>
      </div>
      <div class="legend-item">
        <span class="legend-color free-color"></span>
        <span>Available</span>
      </div>
      <div class="legend-item">
        <span class="legend-color selected-color"></span>
        <span>Selected</span>
      </div>
      <div class="legend-item">
        <span class="legend-color past-color"></span>
        <span>Past Date</span>
      </div>
    </div>

    <!-- Time Slot Selection -->
    <div class="time-slots-section" *ngIf="selectedDate">
      <h3>Available Time Slots for {{ selectedDate | date:'fullDate' }}</h3>
      <div class="time-slots-grid">
        <div
          *ngFor="let slot of timeSlots"
          class="time-slot"
          [class.occupied]="slot.isOccupied"
          [class.selected]="selectedHour === slot.hour"
          [class.disabled]="slot.isOccupied"
          (click)="selectTimeSlot(slot)">
          <span class="time-text">{{ slot.displayTime }}</span>
          <span class="status-badge" *ngIf="slot.isOccupied">Booked</span>
        </div>
      </div>
    </div>

    <!-- Make Appointment Button -->
    <div class="appointment-actions" *ngIf="selectedDate">
      <button
        class="confirm-button"
        (click)="makeAppointment()"
        [disabled]="!canMakeAppointment()">
        Make Appointment
      </button>
    </div>
  </div>
</div>
